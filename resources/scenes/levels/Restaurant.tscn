[gd_scene load_steps=28 format=3 uid="uid://c8lyl5x75huf"]

[ext_resource type="Script" path="res://src/levels/restaurant.gd" id="1_e5gyl"]
[ext_resource type="Material" uid="uid://c83s1vx6oale5" path="res://assets/textures/floor.tres" id="1_l537g"]
[ext_resource type="Material" uid="uid://c52lv0206h5i7" path="res://assets/textures/wall.tres" id="2_svw7q"]
[ext_resource type="Script" path="res://src/managers/dispencer.gd" id="2_u64rt"]
[ext_resource type="Script" path="res://src/managers/table_manager.gd" id="3_xpgpf"]
[ext_resource type="PackedScene" uid="uid://tfo0klgn4pd5" path="res://resources/scenes/objects/table.tscn" id="4_imob6"]
[ext_resource type="Texture2D" uid="uid://baxk2y285twsn" path="res://assets/textures/floor_albedo.png" id="6_f8j2k"]
[ext_resource type="Texture2D" uid="uid://cejrfqmni6yku" path="res://assets/textures/floor_orm.png" id="7_50h1m"]
[ext_resource type="Environment" uid="uid://1jq8e0qxe4xh" path="res://resources/new_environment.tres" id="7_epkef"]
[ext_resource type="Texture2D" uid="uid://x3xrtynck0y0" path="res://assets/textures/floor_heightmap.png" id="8_vr4nm"]
[ext_resource type="Texture2D" uid="uid://bq1ltsp6hwphd" path="res://assets/textures/floor_normal.png" id="9_558p0"]
[ext_resource type="Script" path="res://resources/scenes/levels/spawner.gd" id="10_54lq6"]
[ext_resource type="PackedScene" uid="uid://cfr4u784045c3" path="res://resources/scenes/player/Player.tscn" id="12_ip4nm"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_03c1g"]

[sub_resource type="BoxMesh" id="BoxMesh_h82sa"]
size = Vector3(0.3, 0.3, 0.3)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_e3833"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_4kpqr"]
material = SubResource("StandardMaterial3D_e3833")
radius = 0.05
height = 0.3

[sub_resource type="NavigationMesh" id="NavigationMesh_u5r5c"]
vertices = PackedVector3Array(-3.19928, 0.01536, 4.31098, -3.19928, 0.01536, 4.06098, -3.44928, 0.01536, 4.06098, -3.44928, 0.01536, 1.31098, -3.19928, 0.01536, 1.31098, -3.19928, 0.01536, 1.06098, -3.19928, 0.01536, 0.81098, -3.19928, 0.01536, 0.56098, -3.44928, 0.01536, 0.56098, -3.44928, 0.01536, -2.18902, -3.19928, 0.01536, -2.18902, -3.19928, 0.01536, -2.43902, -1.94928, 0.01536, -2.43902, -1.94928, 0.01536, -2.18902, -1.69928, 0.01536, -2.18902, -1.19928, 0.01536, -2.18902, -0.94928, 0.01536, -2.18902, -0.94928, 0.01536, -2.43902, -4.44928, 0.01536, -4.43902, 0.30072, 0.01536, -2.43902, 0.30072, 0.01536, -2.18902, 0.55072, 0.01536, -2.18902, -3.94928, 0.01536, -2.43902, -3.94928, 0.01536, -2.18902, -3.69928, 0.01536, -2.18902, -3.69928, 0.01536, 0.56098, -3.94928, 0.01536, 0.56098, -3.94928, 0.01536, 0.81098, -3.94928, 0.01536, 1.06098, -3.94928, 0.01536, 1.31098, -3.69928, 0.01536, 1.31098, -3.69928, 0.01536, 4.06098, -3.94928, 0.01536, 4.06098, -3.94928, 0.01536, 4.31098, -4.44928, 0.01536, 0.81098, -4.44928, 0.01536, 1.06098, 4.30072, 0.01536, -4.43902, -4.44928, 0.01536, 4.31098, -4.44928, 0.01536, 4.56098, -2.44928, 0.01536, 4.56098, -2.19928, 0.01536, 4.31098, -1.69928, 0.01536, -0.68902, -1.44928, 0.01536, -0.68902, -1.44928, 0.01536, -1.43902, -1.19928, 0.01536, -1.43902, 4.30072, 0.01536, -0.68902, -4.44928, 0.01536, -2.43902, -1.94928, 0.01536, 1.06098, -1.94928, 0.01536, 0.81098, 0.55072, 0.01536, -0.93902, -1.69928, 0.01536, 0.56098, -1.94928, 0.01536, 0.56098, -1.94928, 0.01536, 1.31098, -1.69928, 0.01536, 1.31098, -1.69928, 0.01536, 4.06098, -1.94928, 0.01536, 4.06098, -1.94928, 0.01536, 4.31098, -2.44928, 0.01536, 4.81098, -2.19928, 0.01536, 4.81098, -0.94928, 0.01536, 4.81098, -0.69928, 0.01536, 4.81098, -0.69928, 0.01536, 4.56098, -1.44928, 0.01536, 3.56098, -1.69928, 0.01536, 3.56098, 0.55072, 0.01536, 0.56098, 0.30072, 0.01536, 0.56098, 0.30072, 0.01536, 0.81098, -0.94928, 0.01536, 0.81098, -0.94928, 0.01536, 0.56098, -1.19928, 0.01536, 0.56098, -1.44928, 0.01536, 2.06098, -2.19928, 0.01536, 8.56098, -0.94928, 0.01536, 8.56098, -1.19928, 0.01536, 0.0609803, -1.44928, 0.01536, 0.0609803, -1.69928, 0.01536, 2.06098, 4.30072, 0.01536, 4.56098)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(8, 7, 6), PackedInt32Array(11, 10, 9), PackedInt32Array(14, 13, 12), PackedInt32Array(16, 15, 17), PackedInt32Array(17, 15, 12), PackedInt32Array(17, 12, 18), PackedInt32Array(21, 20, 19), PackedInt32Array(24, 23, 22), PackedInt32Array(27, 26, 25), PackedInt32Array(30, 29, 28), PackedInt32Array(33, 32, 31), PackedInt32Array(28, 35, 27), PackedInt32Array(27, 35, 34), PackedInt32Array(17, 18, 19), PackedInt32Array(19, 18, 36), PackedInt32Array(28, 27, 25), PackedInt32Array(38, 37, 33), PackedInt32Array(8, 6, 25), PackedInt32Array(25, 6, 3), PackedInt32Array(25, 3, 30), PackedInt32Array(25, 30, 28), PackedInt32Array(0, 40, 39), PackedInt32Array(42, 41, 43), PackedInt32Array(43, 41, 14), PackedInt32Array(24, 22, 9), PackedInt32Array(9, 22, 11), PackedInt32Array(11, 22, 18), PackedInt32Array(44, 43, 15), PackedInt32Array(15, 43, 14), PackedInt32Array(21, 19, 45), PackedInt32Array(45, 19, 36), PackedInt32Array(15, 14, 12), PackedInt32Array(22, 46, 18), PackedInt32Array(6, 48, 5), PackedInt32Array(5, 48, 47), PackedInt32Array(45, 49, 21), PackedInt32Array(6, 5, 3), PackedInt32Array(9, 8, 24), PackedInt32Array(24, 8, 25), PackedInt32Array(33, 0, 38), PackedInt32Array(38, 0, 39), PackedInt32Array(12, 11, 18), PackedInt32Array(2, 0, 31), PackedInt32Array(31, 0, 33), PackedInt32Array(3, 2, 30), PackedInt32Array(30, 2, 31), PackedInt32Array(48, 51, 50), PackedInt32Array(53, 52, 47), PackedInt32Array(56, 55, 54), PackedInt32Array(57, 39, 58), PackedInt32Array(58, 39, 40), PackedInt32Array(58, 40, 56), PackedInt32Array(60, 59, 61), PackedInt32Array(61, 59, 54), PackedInt32Array(61, 54, 62), PackedInt32Array(62, 54, 63), PackedInt32Array(66, 65, 64), PackedInt32Array(69, 68, 67), PackedInt32Array(69, 67, 50), PackedInt32Array(50, 67, 53), PackedInt32Array(53, 67, 70), PackedInt32Array(48, 50, 47), PackedInt32Array(47, 50, 53), PackedInt32Array(64, 49, 45), PackedInt32Array(56, 54, 58), PackedInt32Array(58, 54, 59), PackedInt32Array(58, 59, 72), PackedInt32Array(58, 72, 71), PackedInt32Array(73, 69, 74), PackedInt32Array(74, 69, 50), PackedInt32Array(67, 66, 70), PackedInt32Array(70, 66, 62), PackedInt32Array(70, 75, 53), PackedInt32Array(42, 74, 41), PackedInt32Array(41, 74, 50), PackedInt32Array(66, 64, 62), PackedInt32Array(62, 64, 61), PackedInt32Array(61, 64, 76), PackedInt32Array(76, 64, 45)]
cell_height = 0.01
agent_height = 1.0
agent_radius = 0.3
agent_max_climb = 0.1
edge_max_error = 0.4

[sub_resource type="BoxMesh" id="BoxMesh_4hncn"]
material = ExtResource("2_svw7q")
size = Vector3(0.2, 2.5, 10)

[sub_resource type="BoxShape3D" id="BoxShape3D_4lxpt"]
size = Vector3(0.2, 1, 10)

[sub_resource type="BoxMesh" id="BoxMesh_8xui4"]
material = ExtResource("2_svw7q")
size = Vector3(10, 2.5, 0.2)

[sub_resource type="BoxShape3D" id="BoxShape3D_ne3ar"]
size = Vector3(10, 1, 0.2)

[sub_resource type="PlaneMesh" id="PlaneMesh_83gsm"]
lightmap_size_hint = Vector2i(53, 53)
material = ExtResource("1_l537g")
uv2_padding = 3.56
size = Vector2(10, 10)
subdivide_width = 4
subdivide_depth = 4

[sub_resource type="BoxShape3D" id="BoxShape3D_i7o7w"]
size = Vector3(11, 0.4, 11)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gys7v"]
albedo_texture = ExtResource("6_f8j2k")
roughness_texture = ExtResource("7_50h1m")
roughness_texture_channel = 1
normal_enabled = true
normal_texture = ExtResource("9_558p0")
ao_enabled = true
ao_texture = ExtResource("7_50h1m")
heightmap_enabled = true
heightmap_deep_parallax = true
heightmap_min_layers = 8
heightmap_max_layers = 32
heightmap_texture = ExtResource("8_vr4nm")
uv1_scale = Vector3(2.645, 5.3, 2.94)
uv2_scale = Vector3(2, 2, 2)

[sub_resource type="PlaneMesh" id="PlaneMesh_0p3id"]
lightmap_size_hint = Vector2i(53, 53)
material = SubResource("StandardMaterial3D_gys7v")
uv2_padding = 3.56
size = Vector2(2, 4)
subdivide_width = 4
subdivide_depth = 4

[sub_resource type="BoxShape3D" id="BoxShape3D_8io62"]
size = Vector3(1.41663, 1, 3.92749)

[node name="Restaurant" type="Node3D"]
script = ExtResource("1_e5gyl")

[node name="Dispencer" type="Node3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.28776, 0, -4.5654)
script = ExtResource("2_u64rt")

[node name="DispencerAura" type="StaticBody3D" parent="Dispencer"]

[node name="DispencerAuraCol" type="CollisionShape3D" parent="Dispencer/DispencerAura"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.305683)
shape = SubResource("CylinderShape3D_03c1g")

[node name="Counter" type="MeshInstance3D" parent="Dispencer/DispencerAura"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0208621, 0.155681, 0.277818)
mesh = SubResource("BoxMesh_h82sa")
skeleton = NodePath("../..")

[node name="Indicator" type="MeshInstance3D" parent="Dispencer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.532384, 0.258182)
visible = false
mesh = SubResource("CapsuleMesh_4kpqr")

[node name="FLoorPlan" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_u5r5c")

[node name="TableManager" type="Node" parent="FLoorPlan" node_paths=PackedStringArray("templates")]
unique_name_in_owner = true
script = ExtResource("3_xpgpf")
templates = [NodePath("Table"), NodePath("Table2"), NodePath("Table3"), NodePath("Table4"), NodePath("Table5")]

[node name="Table" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.58739, 0, 2.77521)

[node name="Table2" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.55306, 0, -0.870384)

[node name="Table3" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.4866, 0, 2.7504)

[node name="Table4" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.55885, 0, -0.726384)

[node name="Table5" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.394876, 0, -0.726384)

[node name="Wall" type="MeshInstance3D" parent="FLoorPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.09928, 1.2196, 0.0103987)
mesh = SubResource("BoxMesh_4hncn")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="FLoorPlan/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0639586, -0.736217, -0.0103987)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/Wall/StaticBody3D"]
shape = SubResource("BoxShape3D_4lxpt")

[node name="Wall2" type="MeshInstance3D" parent="FLoorPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.09932, 1.22886, 0.0207974)
mesh = SubResource("BoxMesh_4hncn")
skeleton = NodePath("../floor")

[node name="StaticBody3D2" type="StaticBody3D" parent="FLoorPlan/Wall2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00660563, -0.745476, -0.0207974)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/Wall2/StaticBody3D2"]
shape = SubResource("BoxShape3D_4lxpt")

[node name="BackWall" type="MeshInstance3D" parent="FLoorPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.21536, -5.08902)
mesh = SubResource("BoxMesh_8xui4")
skeleton = NodePath("../floor")

[node name="StaticBody3D3" type="StaticBody3D" parent="FLoorPlan/BackWall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.792652, 0.0257692)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/BackWall/StaticBody3D3"]
shape = SubResource("BoxShape3D_ne3ar")

[node name="floor" type="MeshInstance3D" parent="FLoorPlan"]
mesh = SubResource("PlaneMesh_83gsm")
skeleton = NodePath("../..")

[node name="StaticBody3D4" type="StaticBody3D" parent="FLoorPlan/floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.174269, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/floor/StaticBody3D4"]
shape = SubResource("BoxShape3D_i7o7w")

[node name="walkway" type="MeshInstance3D" parent="FLoorPlan/floor/StaticBody3D4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.48639, 0.174269, 7.00121)
mesh = SubResource("PlaneMesh_0p3id")
skeleton = NodePath("../../..")

[node name="StaticBody3D4" type="StaticBody3D" parent="FLoorPlan/floor/StaticBody3D4/walkway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.174269, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/floor/StaticBody3D4/walkway/StaticBody3D4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00125408, -0.316697, -0.268188)
shape = SubResource("BoxShape3D_8io62")

[node name="Spawner" type="Marker3D" parent="FLoorPlan/floor" node_paths=PackedStringArray("npcContainer")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.4683, 0, 8.63043)
script = ExtResource("10_54lq6")
npcContainer = NodePath("../../../Npcs")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.689645, 0.724148, 0, -0.724148, 0.689645, 0, 5.84508, 6.88263)
environment = ExtResource("7_epkef")
fov = 62.4
size = 0.089
near = 0.032

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Camera3D"]
transform = Transform3D(1, 0, 0, 0, 0.685081, 0.728467, 0, -0.728467, 0.685081, 0, 6.04551, 3.34648)
light_bake_mode = 0
shadow_enabled = true
shadow_transmittance_bias = 0.126
shadow_blur = 3.067

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("7_epkef")

[node name="Npcs" type="Node3D" parent="."]

[node name="Player" parent="." instance=ExtResource("12_ip4nm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.15352, 0.00353631, 0)
