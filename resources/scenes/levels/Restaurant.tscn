[gd_scene load_steps=22 format=3 uid="uid://c8lyl5x75huf"]

[ext_resource type="Script" path="res://src/levels/restaurant.gd" id="1_e5gyl"]
[ext_resource type="Material" uid="uid://c83s1vx6oale5" path="res://assets/textures/floor.tres" id="1_l537g"]
[ext_resource type="Material" uid="uid://c52lv0206h5i7" path="res://assets/textures/wall.tres" id="2_svw7q"]
[ext_resource type="Script" path="res://src/managers/table_manager.gd" id="3_xpgpf"]
[ext_resource type="PackedScene" uid="uid://tfo0klgn4pd5" path="res://resources/scenes/objects/table.tscn" id="4_imob6"]
[ext_resource type="Texture2D" uid="uid://baxk2y285twsn" path="res://assets/textures/floor_albedo.png" id="6_f8j2k"]
[ext_resource type="Texture2D" uid="uid://cejrfqmni6yku" path="res://assets/textures/floor_orm.png" id="7_50h1m"]
[ext_resource type="Environment" uid="uid://1jq8e0qxe4xh" path="res://resources/new_environment.tres" id="7_epkef"]
[ext_resource type="Texture2D" uid="uid://x3xrtynck0y0" path="res://assets/textures/floor_heightmap.png" id="8_vr4nm"]
[ext_resource type="Texture2D" uid="uid://bq1ltsp6hwphd" path="res://assets/textures/floor_normal.png" id="9_558p0"]
[ext_resource type="Script" path="res://resources/scenes/levels/spawner.gd" id="10_54lq6"]

[sub_resource type="NavigationMesh" id="NavigationMesh_u5r5c"]
vertices = PackedVector3Array(-3.19928, 0.01536, 4.31098, -3.19928, 0.01536, 4.06098, -3.44928, 0.01536, 4.06098, -3.44928, 0.01536, 1.31098, -3.19928, 0.01536, 1.31098, -3.19928, 0.01536, 1.06098, -3.19928, 0.01536, 0.81098, -3.19928, 0.01536, 0.56098, -3.44928, 0.01536, 0.56098, -3.44928, 0.01536, -2.18902, -3.19928, 0.01536, -2.18902, -3.19928, 0.01536, -2.43902, -3.94928, 0.01536, -2.43902, -3.94928, 0.01536, -2.18902, -3.69928, 0.01536, -2.18902, -3.69928, 0.01536, 0.56098, -3.94928, 0.01536, 0.56098, -3.94928, 0.01536, 0.81098, -3.94928, 0.01536, 1.06098, -3.94928, 0.01536, 1.31098, -3.69928, 0.01536, 1.31098, -3.69928, 0.01536, 4.06098, -3.94928, 0.01536, 4.06098, -3.94928, 0.01536, 4.31098, -4.44928, 0.01536, 0.81098, -4.44928, 0.01536, 1.06098, -4.44928, 0.01536, 4.31098, -4.44928, 0.01536, 4.56098, -2.44928, 0.01536, 4.56098, -2.19928, 0.01536, 4.31098, -1.94928, 0.01536, 1.06098, -1.94928, 0.01536, 0.81098, -2.19928, 0.01536, -4.43902, -4.44928, 0.01536, -4.43902, -2.19928, 0.01536, -2.43902, -4.44928, 0.01536, -2.43902, -1.94928, 0.01536, -2.43902, -1.94928, 0.01536, -2.18902, -1.69928, 0.01536, -2.18902, -1.69928, 0.01536, 0.56098, -1.94928, 0.01536, 0.56098, -1.94928, 0.01536, 1.31098, -1.69928, 0.01536, 1.31098, -1.69928, 0.01536, 4.06098, -1.94928, 0.01536, 4.06098, -1.94928, 0.01536, 4.31098, -2.44928, 0.01536, 4.81098, -2.19928, 0.01536, 4.81098, -0.94928, 0.01536, 4.81098, -0.69928, 0.01536, 4.81098, -0.69928, 0.01536, 4.56098, -1.44928, 0.01536, 3.56098, -1.69928, 0.01536, 3.56098, 4.30072, 0.01536, -4.43902, -1.44928, 0.01536, 2.06098, 4.30072, 0.01536, 4.56098, -1.69928, 0.01536, 2.06098, -2.19928, 0.01536, 8.56098, -0.94928, 0.01536, 8.56098)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(8, 7, 6), PackedInt32Array(11, 10, 9), PackedInt32Array(14, 13, 12), PackedInt32Array(17, 16, 15), PackedInt32Array(20, 19, 18), PackedInt32Array(23, 22, 21), PackedInt32Array(18, 25, 17), PackedInt32Array(17, 25, 24), PackedInt32Array(15, 14, 8), PackedInt32Array(8, 14, 9), PackedInt32Array(18, 17, 15), PackedInt32Array(27, 26, 23), PackedInt32Array(8, 6, 15), PackedInt32Array(15, 6, 3), PackedInt32Array(15, 3, 20), PackedInt32Array(15, 20, 18), PackedInt32Array(0, 29, 28), PackedInt32Array(6, 31, 5), PackedInt32Array(5, 31, 30), PackedInt32Array(14, 12, 9), PackedInt32Array(9, 12, 11), PackedInt32Array(11, 12, 33), PackedInt32Array(11, 33, 32), PackedInt32Array(6, 5, 3), PackedInt32Array(32, 34, 11), PackedInt32Array(23, 0, 27), PackedInt32Array(27, 0, 28), PackedInt32Array(3, 2, 20), PackedInt32Array(20, 2, 21), PackedInt32Array(2, 0, 21), PackedInt32Array(21, 0, 23), PackedInt32Array(12, 35, 33), PackedInt32Array(38, 37, 36), PackedInt32Array(31, 40, 39), PackedInt32Array(42, 41, 30), PackedInt32Array(45, 44, 43), PackedInt32Array(46, 28, 47), PackedInt32Array(47, 28, 29), PackedInt32Array(47, 29, 45), PackedInt32Array(49, 48, 50), PackedInt32Array(50, 48, 43), PackedInt32Array(50, 43, 51), PackedInt32Array(51, 43, 52), PackedInt32Array(36, 32, 38), PackedInt32Array(38, 32, 53), PackedInt32Array(31, 39, 30), PackedInt32Array(30, 39, 42), PackedInt32Array(36, 34, 32), PackedInt32Array(54, 39, 50), PackedInt32Array(50, 39, 38), PackedInt32Array(50, 38, 55), PackedInt32Array(55, 38, 53), PackedInt32Array(50, 51, 54), PackedInt32Array(54, 56, 42), PackedInt32Array(45, 43, 47), PackedInt32Array(47, 43, 48), PackedInt32Array(47, 48, 58), PackedInt32Array(47, 58, 57), PackedInt32Array(54, 42, 39)]
cell_height = 0.01
agent_height = 1.0
agent_radius = 0.3
agent_max_climb = 0.1
edge_max_error = 0.4

[sub_resource type="BoxMesh" id="BoxMesh_4hncn"]
material = ExtResource("2_svw7q")
size = Vector3(0.2, 2.5, 10)

[sub_resource type="BoxShape3D" id="BoxShape3D_4lxpt"]
size = Vector3(0.2, 1, 10)

[sub_resource type="BoxMesh" id="BoxMesh_8xui4"]
size = Vector3(10, 2.5, 0.2)

[sub_resource type="BoxShape3D" id="BoxShape3D_ne3ar"]
size = Vector3(10, 1, 0.2)

[sub_resource type="PlaneMesh" id="PlaneMesh_83gsm"]
lightmap_size_hint = Vector2i(53, 53)
material = ExtResource("1_l537g")
uv2_padding = 3.56
size = Vector2(10, 10)
subdivide_width = 4
subdivide_depth = 4

[sub_resource type="BoxShape3D" id="BoxShape3D_i7o7w"]
size = Vector3(11, 0.4, 11)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gys7v"]
albedo_texture = ExtResource("6_f8j2k")
roughness_texture = ExtResource("7_50h1m")
roughness_texture_channel = 1
normal_enabled = true
normal_texture = ExtResource("9_558p0")
ao_enabled = true
ao_texture = ExtResource("7_50h1m")
heightmap_enabled = true
heightmap_deep_parallax = true
heightmap_min_layers = 8
heightmap_max_layers = 32
heightmap_texture = ExtResource("8_vr4nm")
uv1_scale = Vector3(2.645, 5.3, 2.94)
uv2_scale = Vector3(2, 2, 2)

[sub_resource type="PlaneMesh" id="PlaneMesh_0p3id"]
lightmap_size_hint = Vector2i(53, 53)
material = SubResource("StandardMaterial3D_gys7v")
uv2_padding = 3.56
size = Vector2(2, 4)
subdivide_width = 4
subdivide_depth = 4

[sub_resource type="BoxShape3D" id="BoxShape3D_8io62"]
size = Vector3(1.41663, 1, 3.92749)

[node name="Restaurant" type="Node3D"]
script = ExtResource("1_e5gyl")

[node name="FLoorPlan" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_u5r5c")

[node name="TableManager" type="Node" parent="FLoorPlan" node_paths=PackedStringArray("templates")]
unique_name_in_owner = true
script = ExtResource("3_xpgpf")
templates = [NodePath("Table"), NodePath("Table2"), NodePath("Table3"), NodePath("Table4")]

[node name="Table" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.58739, 0, 2.77521)

[node name="Table2" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.55306, 0, -0.870384)

[node name="Table3" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.4866, 0, 2.7504)

[node name="Table4" parent="FLoorPlan/TableManager" instance=ExtResource("4_imob6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.55885, 0, -0.726384)

[node name="Wall" type="MeshInstance3D" parent="FLoorPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.09928, 1.2196, 0.0103987)
mesh = SubResource("BoxMesh_4hncn")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="FLoorPlan/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0639586, -0.736217, -0.0103987)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/Wall/StaticBody3D"]
shape = SubResource("BoxShape3D_4lxpt")

[node name="Wall2" type="MeshInstance3D" parent="FLoorPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.09932, 1.22886, 0.0207974)
mesh = SubResource("BoxMesh_4hncn")
skeleton = NodePath("../floor")

[node name="StaticBody3D2" type="StaticBody3D" parent="FLoorPlan/Wall2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00660563, -0.745476, -0.0207974)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/Wall2/StaticBody3D2"]
shape = SubResource("BoxShape3D_4lxpt")

[node name="BackWall" type="MeshInstance3D" parent="FLoorPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.21536, -5.08902)
mesh = SubResource("BoxMesh_8xui4")
skeleton = NodePath("../floor")

[node name="StaticBody3D3" type="StaticBody3D" parent="FLoorPlan/BackWall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.792652, 0.0257692)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/BackWall/StaticBody3D3"]
shape = SubResource("BoxShape3D_ne3ar")

[node name="floor" type="MeshInstance3D" parent="FLoorPlan"]
mesh = SubResource("PlaneMesh_83gsm")
skeleton = NodePath("../..")

[node name="StaticBody3D4" type="StaticBody3D" parent="FLoorPlan/floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.174269, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/floor/StaticBody3D4"]
shape = SubResource("BoxShape3D_i7o7w")

[node name="walkway" type="MeshInstance3D" parent="FLoorPlan/floor/StaticBody3D4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.48639, 0.174269, 7.00121)
mesh = SubResource("PlaneMesh_0p3id")
skeleton = NodePath("../../..")

[node name="StaticBody3D4" type="StaticBody3D" parent="FLoorPlan/floor/StaticBody3D4/walkway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.174269, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FLoorPlan/floor/StaticBody3D4/walkway/StaticBody3D4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00125408, -0.316697, -0.268188)
shape = SubResource("BoxShape3D_8io62")

[node name="Spawner" type="Marker3D" parent="FLoorPlan/floor" node_paths=PackedStringArray("npcContainer")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.4683, 0, 8.63043)
script = ExtResource("10_54lq6")
npcContainer = NodePath("../../../Npcs")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.858772, 0.512358, 0, -0.512358, 0.858772, 0, 5.09833, 8.35547)
environment = ExtResource("7_epkef")
fov = 62.4
size = 0.089
near = 0.032

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Camera3D"]
transform = Transform3D(1, 0, 0, 0, 0.685081, 0.728467, 0, -0.728467, 0.685081, 0, 7.80623, 1.66965)
light_bake_mode = 0
shadow_enabled = true
shadow_transmittance_bias = 0.126
shadow_blur = 3.067

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("7_epkef")

[node name="Npcs" type="Node3D" parent="."]
